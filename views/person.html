{% extends 'base.html' %} {% set title = "Grizzly: Persons" %}
{% block content
    %}
    <!--  TODO: move macro to an include -->
    <div x-data="pageUtils"
         class="container overflow-x-auto p-1 mx-auto mt-4 max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl xl:max-w-4xl">
        <div class="p-5 mb-5 text-3xl font-semibold">Persons</div>
        <div x-cloak
             x-show="showToast"
             class="fixed right-4 bottom-4 p-4 w-72 h-32 rounded transition-transform transform-gpu duration-400 ease bg-slate-700"
             :class="toastType === 'success' ? 'border-l-8 border-green-500' : 'border-l-8 border-red-500'"
             x-transition:enter-start="translate-y-full"
             x-transition:enter-end="translate-y-0"
             x-transition:leave-start="translate-y-0"
             x-transition:leave-end="translate-y-full">
            <p class="text-white">
                <span class="font-semibold leading-relaxed uppercase" x-text="toastTitle"></span>
            </p>
            <p class="mt-2 text-sm text-white" x-html="toastMessage"></p>
        </div>
        <div class="overflow-auto p-3 mx-5 bg-white rounded-md border border-gray-300">
            <div id="person-table">{% include "person_table.html" %}</div>
        </div>
    </div>
    <script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('pageUtils', () => ({
            showToast: false,
            toastMessage: '',
            toastTitle: 'Success',
            toastType: 'success',
            limit: 10,
            async sendNotification(message, opts) {
                this.toastMessage = message
                this.showToast = true
                await new Promise((res) => setTimeout(res, 3000))
                this.showToast = false
                this.toastMessage = ''
            },
            async copyToClipboard(value) {
                await navigator.clipboard.writeText(value)
                this.sendNotification(`Wrote <em>${value}</em> to the clipboard.`)
            },
        }))
    })
    </script>
{% endblock %}
